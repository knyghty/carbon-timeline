(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{156:function(t,e,n){var content=n(164);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(63).default)("3ad537af",content,!0,{sourceMap:!1})},157:function(t,e,n){var content=n(166);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(63).default)("b442e57c",content,!0,{sourceMap:!1})},158:function(t,e,n){var content=n(168);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(63).default)("244aeccf",content,!0,{sourceMap:!1})},159:function(t,e,n){var content=n(175);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(63).default)("7f72a76f",content,!0,{sourceMap:!1})},163:function(t,e,n){"use strict";var r=n(156);n.n(r).a},164:function(t,e,n){(e=n(62)(!1)).push([t.i,'[title]{border-bottom:3px dotted green;cursor:help}.boating{list-style-type:"🛥️ "}.catching-pokemon{list-style-type:"🧢 "}.cycling{list-style-type:"🚲 "}.flying{list-style-type:"✈️ "}.hiking,.walking-nordic{list-style-type:"🥾 "}.horseback-riding{list-style-type:"🐎 "}.in-bus{list-style-type:"🚍 "}.in-cablecar{list-style-type:"🚠 "}.in-ferry{list-style-type:"⛴️ "}.in-funicular{list-style-type:"🚞 "}.in-gondola-lift{list-style-type:"🚡 "}.in-subway{list-style-type:"🚇 "}.in-passenger-vehicle,.in-vehicle{list-style-type:"🚘 "}.in-train{list-style-type:"🚆 "}.in-tram{list-style-type:"🚊 "}.in-wheelchair{list-style-type:"🦽 "}.kayaking,.rowing{list-style-type:"🚣 "}.kitesurfing{list-style-type:"🪁 "}.motorcycling{list-style-type:"🏍️ "}.running{list-style-type:"🏃 "}.sailing{list-style-type:"⛵ "}.skateboarding{list-style-type:"🛹 "}.skating{list-style-type:"🛼 "}.skiing{list-style-type:"⛷️ "}.sledding{list-style-type:"🛷 "}.snowboarding{list-style-type:"🏂 "}.snowmobile{list-style-type:"❄️ "}.snowshoeing{list-style-type:"☃️ "}.surfing{list-style-type:"🏄 "}.swimming{list-style-type:"🏊 "}.walking{list-style-type:"🚶 "}',""]),t.exports=e},165:function(t,e,n){"use strict";var r=n(157);n.n(r).a},166:function(t,e,n){(e=n(62)(!1)).push([t.i,"ul[data-v-25e85458]{display:flex;flex-wrap:wrap}li[data-v-25e85458]{width:100%;padding:7px 0 7px 4px}@media (min-width:680px){li[data-v-25e85458]{width:50%;padding-right:22px}}@media (min-width:1000px){li[data-v-25e85458]{width:33.33333%}}",""]),t.exports=e},167:function(t,e,n){"use strict";var r=n(158);n.n(r).a},168:function(t,e,n){(e=n(62)(!1)).push([t.i,"summary{cursor:pointer;font-weight:700}.yearly-results section{margin-bottom:60px}.yearly-results section:last-child{margin-bottom:0}",""]),t.exports=e},174:function(t,e,n){"use strict";var r=n(159);n.n(r).a},175:function(t,e,n){(e=n(62)(!1)).push([t.i,"[type=file]{display:none}[type=file]+label{display:block;border-radius:5px;margin:40px auto;padding:20px 30px;max-width:200px;background:#007a52;color:#fff;font-weight:700;text-align:center;cursor:pointer}[type=file]+label:focus,[type=file]+label:hover{background:#00b377}progress{display:block;margin:40px auto 0;width:80%}.error{color:red}",""]),t.exports=e},176:function(t,e,n){"use strict";n.r(e);n(41),n(43),n(42),n(33),n(31),n(32),n(79),n(30),n(20),n(12),n(44);var r=n(55),o=n(75),l=["DECEMBER","NOVEMBER","OCTOBER","SEPTEMBER","AUGUST","JULY","JUNE","MAY","APRIL","MARCH","FEBRUARY","JANUARY"],c=(n(82),n(160),{props:{distance:{type:Number,default:function(){return 0}},activity:{type:String,default:function(){return"Unknown"}}},data:function(){return{co2ePerKm:{WALKING:0,IN_PASSENGER_VEHICLE:.4402,IN_TRAIN:.093,IN_BUS:.1,CYCLING:0,RUNNING:0,IN_WHEELCHAIR:0,MOTORCYCLING:null,HIKING:0,IN_TRAM:.1178,FLYING:.6,SAILING:0,IN_SUBWAY:.0992,HORSEBACK_RIDING:0,SKIING:0,SWIMMING:0,BOATING:null,IN_FERRY:null,WALKING_NORDIC:0,KAYAKING:0,SLEDDING:0,SNOWMOBILE:null,IN_FUNICULAR:null,SKATING:0,KITESURFING:0,SNOWSHOEING:0,IN_VEHICLE:.4402,SNOWBOARDING:0,SURFING:0,IN_GONDOLA_LIFT:null,IN_CABLECAR:null,SKATEBOARDING:0,ROWING:0,CATCHING_POKEMON:0},co2eExplanation:{FLYING:"Rough estimate based somewhere between short-haul and long-haul flights. Assumes economy class.",IN_BUS:"Assumes a diesel coach.",IN_TRAIN:"Assumes coach (standard) class. Double this figure if you ride first class.",IN_PASSENGER_VEHICLE:"Assumes average UK car.",IN_VEHICLE:"Assumes an average UK car.",WALKING:"Strictly speaking, expends food calories, but assuming zero since it's diet-dependant."}}},computed:{activityClass:function(){return this.activity.toLowerCase().replace(/_/g,"-")},activityName:function(){return"IN_PASSENGER_VEHICLE"===this.activity?"In vehicle":"WALKING_NORDIC"===this.activity?"Nordic walking":this.activity.charAt(0)+this.activity.toLowerCase().replace(/_/g," ").slice(1)},distanceKm:function(){return this.distance/1e3},co2eDisplay:function(){if(null===this.co2ePerKm[this.activity])return"unknown";var t=this.co2ePerKm[this.activity]*this.distanceKm;return t<1e3?"".concat(Math.round(t)," kg"):"".concat((t/1e3).toFixed(2).toLocaleString()," tons")}}}),y=(n(163),n(22)),f={components:{ActivityItem:Object(y.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{class:t.activityClass},[t._v("\n  "+t._s(t.activityName)+": "+t._s(Math.round(t.distanceKm).toLocaleString())+" km,\n  "),n("span",{attrs:{title:t.activity in t.co2eExplanation&&t.co2eExplanation[t.activity]}},[t._v(t._s(t.co2eDisplay)+" CO2e")])])}),[],!1,null,null,null).exports},props:{resultObject:{type:Object,default:function(){return{}}}}};n(165);function d(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _={components:{ResultSet:Object(y.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("ul",this._l(this.resultObject,(function(t,n){return e("activity-item",{key:n,attrs:{activity:n,distance:t}})})),1)}),[],!1,null,"25e85458",null).exports},computed:m(m({},Object(o.c)(["data","summaries"])),{},{orderedData:function(){for(var data={},t=0,e=Object.keys(this.data);t<e.length;t++){var n=e[t];data[n]={};var r,o=this.data[n],c=d(l);try{for(c.s();!(r=c.n()).done;){var y=r.value;y in o&&(data[n][y]=o[y])}}catch(t){c.e(t)}finally{c.f()}}return data}})},w=(n(167),Object(y.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("h1",[t._v("Your results")]),t._v(" "),n("p",{attrs:{"aria-role":"note"}},[t._v("\n    Note: Google Timeline is far from perfect, it is dependent on both how\n    accurate your GPS is, and how well Google has guessed your activity. This\n    tool works best with a fairly manicured timeline, i.e. you have gone in\n    and corrected the locations and activities in Google Maps.\n  ")]),t._v(" "),t._m(0),t._v(" "),n("h2",[t._v("Total")]),t._v(" "),n("result-set",{attrs:{"result-object":t.summaries.totals}}),t._v(" "),n("div",{staticClass:"yearly-results"},t._l(Object.keys(t.orderedData).reverse(),(function(e,r){return n("section",{key:r},[n("h2",[t._v(t._s(e))]),t._v(" "),n("result-set",{attrs:{"result-object":t.summaries[e]}}),t._v(" "),n("details",[n("summary",[t._v("Show monthly data")]),t._v(" "),t._l(Object.keys(t.orderedData[e]),(function(r,o){return n("div",{key:o},[n("h3",[t._v("\n            "+t._s(r.charAt(0).toUpperCase()+r.toLocaleLowerCase().slice(1))+"\n          ")]),t._v(" "),n("result-set",{attrs:{"result-object":t.data[e][r]}})],1)}))],2)],1)})),0)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{attrs:{"aria-role":"note"}},[this._v("\n    Further, the figures used for CO2e calculations come from Mike\n    Berners-Lee's book\n    "),e("cite",[e("a",{attrs:{href:"https://www.goodreads.com/book/show/7230015-how-bad-are-bananas"}},[this._v("How Bad Are Bananas?: The carbon footprint of everything")])]),this._v(", which is somehwat outdated by now. As such, all the results should be\n    seen as a rough guide.\n  ")])}],!1,null,null,null).exports),O=(n(81),n(169)),I=n.n(O);n(66),n(67);function N(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var E=function(data){var t,e=null,n={},r=N(data.timelineObjects);try{for(r.s();!(t=r.n()).done;){var o=t.value.activitySegment;if(o&&("activityType"in o&&"distance"in o&&["MEDIUM","HIGH"].includes(o.confidence))){o.activityType in n?n[o.activityType]+=o.distance:n[o.activityType]=o.distance;var l=null;"duration"in o&&(l=o.duration.startTimestampMs),(!e||l<e)&&(e=l)}}}catch(t){r.e(t)}finally{r.f()}return{earliestTimestampMs:e,counter:n}};function S(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function R(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var C={name:"FileUpload",components:{},data:function(){return{completedFiles:0,totalFiles:0,hasError:!1,isRunning:!1}},computed:Object(o.c)(["data"]),methods:R(R({},Object(o.b)(["mergeData","calculateSummaries"])),{},{handleFile:function(t){var e=this;e.hasError=!1;var n=t.target.files[0],o=new FileReader;o.onload=function(){(new I.a).loadAsync(o.result).then((function(t){var n=t.file(/^Takeout\/Location History\/Semantic Location History\/.*\.json$/);e.totalFiles=n.length,e.totalFiles?e.isRunning=!0:e.hasError=!0;var o,l=S(n);try{var c=function(){var t=o.value;t.async("string").then((function(content){var n=t.name.split("/").slice(-1)[0].split(".")[0];e.mergeData(Object(r.a)({},n,E(JSON.parse(content)))),e.completedFiles+=1,e.completedFiles===e.totalFiles&&(e.calculateSummaries(),e.$emit("finished"))}),(function(t){e.hasError=!0}))};for(l.s();!(o=l.n()).done;)c()}catch(t){l.e(t)}finally{l.f()}}))},o.readAsBinaryString(n)}})},k=(n(174),{components:{DisplayResults:w,FileUpload:Object(y.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isRunning,expression:"!isRunning"}]},[n("h1",[t._v("Carbon Timeline")]),t._v(" "),n("p",[t._v("\n      This tool can be used to calculate the distance traveled and CO2e\n      emissions for Google Timeline users.\n    ")]),t._v(" "),n("p",[t._v("Instructions:")]),t._v(" "),t._m(0),t._v(" "),n("form",[n("input",{attrs:{id:"file",type:"file",accept:"application/zip"},on:{change:t.handleFile}}),t._v(" "),n("label",{attrs:{for:"file",role:"button",tabindex:"0"}},[t._v("choose a file")]),t._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:t.hasError,expression:"hasError"}],staticClass:"error"},[t._v("Something went wrong.")])]),t._v(" "),n("p",{attrs:{"aria-role":"note"}},[t._v("\n      Note: This tool runs entirely on your device. No data is uploaded\n      anywhere.\n    ")])]),t._v(" "),n("h1",{directives:[{name:"show",rawName:"v-show",value:t.isRunning,expression:"isRunning"}]},[t._v("Loading results …")]),t._v(" "),n("progress",{directives:[{name:"show",rawName:"v-show",value:t.isRunning,expression:"isRunning"}],attrs:{max:t.totalFiles},domProps:{value:t.completedFiles}})])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ol",[n("li",[t._v("\n        Head to "),n("a",{attrs:{href:"https://takeout.google.com/"}},[t._v("Google Takeout")])]),t._v(" "),n("li",[t._v("\n        Make sure you're logged into the account you use for your phone.\n      ")]),t._v(" "),n("li",[t._v("Hit “deselect all”, then select “Location History”.")]),t._v(" "),n("li",[t._v("\n        Choose “Next step” and make sure you download the data as a zip.\n      ")]),t._v(" "),n("li",[t._v("Choose the file (the entire zip) below.")])])}],!1,null,null,null).exports},data:function(){return{hasFinished:!1}},head:function(){return{title:"Carbon Timeline Calculator",meta:[{hid:"description",name:"description",content:"Calculate your travel carbon footprint from your Google Timeline / Location History data"}]}}}),G=Object(y.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[t.hasFinished?n("display-results"):n("file-upload",{on:{finished:function(e){t.hasFinished=!0}}})],1)}),[],!1,null,null,null);e.default=G.exports}}]);